<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Memorandum.Desktop.ViewModels"
        x:Class="Memorandum.Desktop.MainWindow"
        Title="Memorandum"
        MinWidth="800"
        MinHeight="500"
        Width="1100"
        Height="700"
        SystemDecorations="None"
        Background="{StaticResource AppBackground}"
        ExtendClientAreaToDecorationsHint="True">
  <Border BorderBrush="{StaticResource AppBackground}" BorderThickness="1">
    <Grid RowDefinitions="Auto,*">
      <Border x:Name="HeaderBorder" Grid.Row="0" Classes="AppHeader" Background="Transparent" Cursor="SizeAll" PointerPressed="OnTitleBarPointerPressed">
        <Grid ColumnDefinitions="Auto,*,Auto,Auto">
          <Border Grid.Column="0" Background="Transparent" Padding="0,8" IsHitTestVisible="False">
            <TextBlock Text="Memorandum" FontSize="20" FontWeight="SemiBold" Foreground="{StaticResource PrimaryForeground}" VerticalAlignment="Center" Margin="0,0,24,0" />
          </Border>
          <TextBox x:Name="SearchBox" Grid.Column="1" Watermark="Поиск по заметкам..." VerticalAlignment="Center" MaxWidth="400" HorizontalAlignment="Left" Classes="DarkInput" KeyDown="OnSearchKeyDown" />
          <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
            <Button x:Name="CreateNoteButton" Content="+ Создать заметку" Classes="PrimaryButton" Command="{Binding CreateNoteCommand}" />
            <Button x:Name="PresetsButton" Content="Пресеты" Classes="SecondaryButton" Command="{Binding NavigateToPresetsCommand}" />
            <Button x:Name="ScreenshotButton" Content="Скриншот" Classes="SecondaryButton" Click="OnScreenshotClick" />
            <Button x:Name="SettingsButton" Content="Настройки" Classes="SecondaryButton" Command="{Binding NavigateToSettingsCommand}" />
          </StackPanel>
          <StackPanel Grid.Column="3" Orientation="Horizontal" Spacing="10" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="12,0,16,0">
            <Button x:Name="MinimizeButton" Content="—" FontSize="14" Classes="TitleBarButton" Margin="0,0,10,0" Click="OnMinimizeClick" />
            <Button x:Name="MaximizeButton" Content="□" FontSize="12" Classes="TitleBarButton" Margin="0,0,10,0" Click="OnMaximizeClick" />
            <Button x:Name="CloseButton" Content="×" FontSize="18" Classes="TitleBarButton CloseButton" Click="OnCloseClick" />
          </StackPanel>
        </Grid>
      </Border>
    <Grid Grid.Row="1" ColumnDefinitions="Auto,*" x:Name="MainContentGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
      <Border x:Name="ModalOverlay" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Background="#33000000" IsHitTestVisible="True" IsVisible="False" ZIndex="1000" />
      <Border Grid.Column="0" Classes="SidebarPanel">
        <ScrollViewer HorizontalScrollBarVisibility="Disabled">
          <StackPanel x:Name="SidebarStack" Spacing="0">
            <TextBlock Text="Навигация" Foreground="{StaticResource GraphLabelSecondary}" FontSize="12" Margin="16,16,16,8" />
            <Button x:Name="AllNotesButton" Classes="NavItem" Command="{Binding NavigateToNotesCommand}">
              <StackPanel Orientation="Horizontal" Spacing="10">
                <Image x:Name="IconAllNotes" Width="20" Height="20" />
                <TextBlock Text="Все заметки" VerticalAlignment="Center" />
              </StackPanel>
            </Button>
            <Button x:Name="GraphButton" Classes="NavItem" Command="{Binding NavigateToGraphCommand}">
              <StackPanel Orientation="Horizontal" Spacing="10">
                <Image x:Name="IconGraph" Width="20" Height="20" />
                <TextBlock Text="Граф" VerticalAlignment="Center" />
              </StackPanel>
            </Button>
            <Border Classes="SidebarSection">
              <StackPanel Spacing="4">
                <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,0,0,4">
                  <Image x:Name="IconFolders" Width="16" Height="16" VerticalAlignment="Center" />
                  <TextBlock Text="Папки" Foreground="{StaticResource GraphLabelSecondary}" FontSize="12" VerticalAlignment="Center" />
                </StackPanel>
                <Button x:Name="AddFolderButton" Content="+ Добавить папку" Classes="NavItem" Click="OnAddFolderClick" />
                <StackPanel x:Name="FoldersList" Margin="0,2,0,0" Spacing="2" />
              </StackPanel>
            </Border>
            <Border Classes="SidebarSection">
              <StackPanel Spacing="4">
                <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,0,0,4">
                  <Image x:Name="IconTags" Width="16" Height="16" VerticalAlignment="Center" />
                  <TextBlock Text="Теги" Foreground="{StaticResource GraphLabelSecondary}" FontSize="12" VerticalAlignment="Center" />
                </StackPanel>
                <Button x:Name="AddTagButton" Content="+ Добавить тег" Classes="NavItem" Click="OnAddTagClick" />
                <StackPanel x:Name="TagsList" Margin="0,2,0,0" Spacing="2" />
              </StackPanel>
            </Border>
          </StackPanel>
        </ScrollViewer>
      </Border>
      <ContentControl x:Name="ContentArea" Grid.Column="1" Background="{StaticResource AppBackground}"
                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" />
    </Grid>
    </Grid>
  </Border>
</Window>
