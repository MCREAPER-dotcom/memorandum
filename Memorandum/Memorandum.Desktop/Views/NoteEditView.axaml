<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:views="using:Memorandum.Desktop.Views"
             xmlns:controls="using:Memorandum.Desktop.Controls"
             xmlns:res="using:Memorandum.Desktop.Resources"
             x:Class="Memorandum.Desktop.Views.NoteEditView"
             Classes="NoteEditForm"
             Background="{StaticResource AppBackground}"
             HorizontalAlignment="Stretch"
             VerticalAlignment="Stretch">
  <Grid RowDefinitions="Auto,*" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Border Grid.Row="0" Classes="AppHeader">
      <Grid ColumnDefinitions="Auto,*,Auto">
        <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
          <Button x:Name="BackButton" Content="{x:Static res:UiStrings.Back}" Classes="SecondaryButton" Click="OnBackClick" />
          <TextBlock x:Name="TitleText" Text="{x:Static res:UiStrings.NoteEditTitle}" Classes="PageTitle" VerticalAlignment="Center" />
        </StackPanel>
        <Panel Grid.Column="1" />
        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
          <Button x:Name="DeleteButton" Content="{x:Static res:UiStrings.Delete}" Background="{StaticResource TagPillRed}" Foreground="{StaticResource PrimaryForeground}" Padding="12,8" IsVisible="False" Click="OnDeleteClick" />
          <Button x:Name="CancelButton" Content="{x:Static res:UiStrings.Cancel}" Classes="SecondaryButton" Click="OnCancelClick" />
          <Button x:Name="SaveButton" Content="{x:Static res:UiStrings.Save}" Classes="PrimaryButton" Click="OnSaveClick" />
        </StackPanel>
      </Grid>
    </Border>
    <controls:ScrollableContentArea Grid.Row="1" Padding="24,24,24,0">
      <StackPanel Margin="0,16,0,0">
        <Grid ColumnDefinitions="*,*" RowDefinitions="Auto">
        <StackPanel Grid.Column="0" Spacing="20" Margin="0,0,20,0">
          <Border Classes="NoteEditCard">
            <StackPanel Spacing="12">
              <TextBlock Text="{x:Static res:UiStrings.NoteTitle}" Classes="SectionLabel" />
              <TextBox x:Name="TitleBox" Watermark="{x:Static res:UiStrings.NoteTitleWatermark}" Classes="DarkInput" />
            </StackPanel>
          </Border>
          <Border Classes="NoteEditCard">
            <StackPanel Spacing="12">
              <TextBlock Text="{x:Static res:UiStrings.Content}" Classes="SectionLabel" />
              <TextBlock Text="{x:Static res:UiStrings.DescriptionNote}" Classes="StaticLabelSmall" Margin="0,0,0,4" />
              <TextBox x:Name="DescriptionBox" MinHeight="60" MaxHeight="120" Watermark="{x:Static res:UiStrings.DescriptionWatermark}" TextWrapping="Wrap" Classes="DarkInput" AcceptsReturn="True" />
              <TextBlock Text="Вложения и изображения" Classes="StaticLabelSmall" Margin="0,12,0,4" />
              <Border Background="{StaticResource InputFieldBackground}" BorderBrush="{StaticResource GraphBorderBrush}" BorderThickness="1" CornerRadius="6" Padding="12" MinHeight="80" Margin="0,0,0,8">
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" MaxHeight="300" MaxWidth="400" Focusable="True" AllowAutoHide="False">
                  <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <ItemsControl x:Name="ContentBlocksControl" ItemTemplate="{StaticResource ContentBlockTemplateSelector}" HorizontalAlignment="Left">
                      <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                          <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                      </ItemsControl.ItemsPanel>
                    </ItemsControl>
                  </StackPanel>
                </ScrollViewer>
              </Border>
              <TextBox x:Name="ContentBox" AcceptsReturn="True" MinHeight="120" Watermark="{x:Static res:UiStrings.ContentWatermark}" TextWrapping="Wrap" Classes="DarkInput" IsVisible="False" />
            </StackPanel>
          </Border>
          <Border Classes="NoteEditCard">
            <StackPanel Spacing="12">
              <TextBlock Text="{x:Static res:UiStrings.Hyperlinks}" Classes="SectionLabel" />
              <Grid ColumnDefinitions="*,Auto">
                <TextBox Grid.Column="0" x:Name="LinkBox" Watermark="{x:Static res:UiStrings.LinkWatermark}" Margin="0,0,8,0" Classes="DarkInput" />
                <Button Grid.Column="1" Content="{x:Static res:UiStrings.Add}" Classes="PrimaryButton" Click="OnAddLinkClick" Padding="16,10" />
              </Grid>
            </StackPanel>
          </Border>
          <Border x:Name="ImageDropZone" Classes="NoteEditCard ImageDropZone" Padding="20" MinHeight="80" Cursor="Hand">
            <StackPanel Spacing="8" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
              <TextBlock Text="{x:Static res:UiStrings.LoadImageOrPaste}" Classes="StaticLabel" VerticalAlignment="Center" IsHitTestVisible="False" />
              <Button x:Name="PasteFromClipboardButton" Content="{x:Static res:UiStrings.PasteFromClipboard}" Classes="SecondaryButton" Click="OnPasteFromClipboardClick" />
            </StackPanel>
          </Border>
        </StackPanel>
        <Grid Grid.Column="1" ColumnDefinitions="*,*" RowDefinitions="Auto,Auto">
          <Border Grid.Row="0" Grid.Column="0" Classes="NoteEditCard" Margin="0,0,10,10">
            <StackPanel Spacing="16">
              <TextBlock Text="{x:Static res:UiStrings.NoteParams}" Classes="SectionLabel" Foreground="{StaticResource LabelForeground}" Margin="0,0,0,4" />
              <StackPanel Spacing="8">
                <TextBlock Text="{x:Static res:UiStrings.Type}" Classes="StaticLabel" Foreground="{StaticResource LabelForeground}" />
                <StackPanel Orientation="Horizontal" Spacing="20">
                  <RadioButton x:Name="TypeNormal" Content="{x:Static res:UiStrings.Regular}" GroupName="NoteType" IsChecked="True" Foreground="{StaticResource LabelForeground}" />
                  <RadioButton x:Name="TypeSticker" Content="{x:Static res:UiStrings.Sticker}" GroupName="NoteType" Foreground="{StaticResource LabelForeground}" />
                </StackPanel>
              </StackPanel>
              <StackPanel Spacing="8">
                <TextBlock Text="{x:Static res:UiStrings.TimerMin}" Classes="StaticLabel" Foreground="{StaticResource LabelForeground}" />
                <TextBox x:Name="TimerDurationBox" Watermark="15" Classes="DarkInput" />
              </StackPanel>
              <StackPanel Spacing="8" ClipToBounds="False">
                <TextBlock Text="{x:Static res:UiStrings.Deadline}" Classes="StaticLabel" Foreground="{StaticResource LabelForeground}" />
                <TextBlock Text="{x:Static res:UiStrings.DeadlineHint}" Classes="StaticLabelSmall" Foreground="{StaticResource LabelForeground}" />
                <views:DeadlinePickerControl x:Name="DeadlinePickerControl" />
              </StackPanel>
            </StackPanel>
          </Border>
          <Border Grid.Row="0" Grid.Column="1" Classes="NoteEditCard" Margin="10,0,0,10">
            <StackPanel Spacing="16">
              <TextBlock Text="{x:Static res:UiStrings.Organization}" Classes="SectionLabel" Foreground="{StaticResource LabelForeground}" Margin="0,0,0,4" />
              <StackPanel Spacing="8">
                <TextBlock Text="{x:Static res:UiStrings.NoteFolderLabel}" Classes="StaticLabel" Foreground="{StaticResource LabelForeground}" />
                <Button x:Name="AddFolderButton" Content="{x:Static res:UiStrings.AddFolder}" Classes="GraphLinkButton" HorizontalAlignment="Left" Click="OnAddFolderClick" />
                <ScrollViewer MaxHeight="140" HorizontalScrollBarVisibility="Auto">
                  <StackPanel x:Name="FolderPanel" Spacing="2" />
                </ScrollViewer>
              </StackPanel>
              <Border Height="1" Background="{StaticResource GraphBorderBrush}" Margin="0,4,0,4" Opacity="0.5" />
              <StackPanel Spacing="8">
                <TextBlock Text="{x:Static res:UiStrings.NoteTagsLabel}" Classes="StaticLabel" Foreground="{StaticResource LabelForeground}" />
                <WrapPanel x:Name="TagsWrap" Orientation="Horizontal" />
                <Button Content="{x:Static res:UiStrings.CreateTag}" Classes="GraphLinkButton" HorizontalAlignment="Left" Click="OnCreateTagClick" />
              </StackPanel>
            </StackPanel>
          </Border>
          <Border Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Classes="NoteEditCard" Margin="0,0,0,0">
            <StackPanel Spacing="12">
              <TextBlock Text="{x:Static res:UiStrings.StickerAppearance}" Classes="SectionLabel" Foreground="{StaticResource LabelForeground}" />
              <Grid ColumnDefinitions="Auto,*,Auto,*" RowDefinitions="Auto,Auto">
                <TextBlock Grid.Row="0" Grid.Column="0" Text="{x:Static res:UiStrings.BackgroundColorHex}" Classes="StaticLabel" Foreground="{StaticResource LabelForeground}" VerticalAlignment="Center" Margin="0,0,12,0" />
                <TextBox Grid.Row="0" Grid.Column="1" x:Name="StickerBackgroundBox" Watermark="#fffde7" Classes="DarkInput" Margin="0,0,24,0" />
                <TextBlock Grid.Row="0" Grid.Column="2" Text="{x:Static res:UiStrings.TransparencyPercent}" Classes="StaticLabel" Foreground="{StaticResource LabelForeground}" VerticalAlignment="Center" Margin="0,0,12,0" />
                <TextBox Grid.Row="0" Grid.Column="3" x:Name="StickerTransparencyBox" Watermark="100" Classes="DarkInput" />
                <StackPanel Grid.Row="1" Grid.ColumnSpan="4" Orientation="Horizontal" Spacing="24" Margin="0,10,0,0">
                  <CheckBox x:Name="StickerClickThroughCheck" Content="{x:Static res:UiStrings.StickerClickThrough}" Foreground="{StaticResource PrimaryForeground}" />
                  <CheckBox x:Name="StickerPinnedCheck" Content="{x:Static res:UiStrings.StickerPinned}" Foreground="{StaticResource PrimaryForeground}" IsChecked="True" />
                  <CheckBox x:Name="StickerCloseOnTimerCheck" Content="{x:Static res:UiStrings.StickerCloseOnTimer}" Foreground="{StaticResource PrimaryForeground}" />
                </StackPanel>
              </Grid>
            </StackPanel>
          </Border>
        </Grid>
      </Grid>
        <Border Height="120" Background="Transparent" IsHitTestVisible="False" />
      </StackPanel>
    </controls:ScrollableContentArea>
  </Grid>
</UserControl>
